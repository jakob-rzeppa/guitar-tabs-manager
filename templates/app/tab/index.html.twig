{% extends 'app/base.html.twig' %}

{% block title %}
	Tabs
{% endblock %}

{% block content %}
	<h1>Tabs</h1>

	<div data-controller="tabs-display" class="tabs-display-container">
		<input class="tabs-search-input" type="text" placeholder="Search..." data-tabs-display-target="tabSearchInput" data-action="input->tabs-display#search">
		<input class="tabs-search-input" type="text" placeholder="Search..." autocomplete="off" data-tabs-display-target="filterByTagsInput" data-action="input->tabs-display#orderTagSuggestions">
		<div class="tags-autocomplete" data-tabs-display-target="tagsAutocomplete" data-tags="{{ tags|map(tag => tag.name)|join(',') }}">
			{% for tag in tags %}
				<div data-name="{{ tag.name }}" class="tags-autocomplete-item" data-action="click->tabs-display#selectTag">
					{{ tag.name }}
				</div>
			{% endfor %}
		</div>
		<hr class="devider" style="margin: 20px 0;">
		<div class="tabs-display" data-tabs-display-target="tabsContainer">
			{% for tab in tabs %}
				<div data-tabs-display-target="tabItem" data-title="{{ tab.title }}" data-tags="{{ tab.tags|map(tag => tag.name)|join(',') }}">
					<h2>{{ tab.title }}
						{% if tab.artist is not empty %}
							<span>by</span>
							{{ tab.artist.name }}
						{% endif %}
					</h2>
					{% if tab.tags is not null %}
						<ul>
							{% for tag in tab.tags %}
								<li>{{ tag.name }}</li>
							{% endfor %}
						</ul>
					{% endif %}
					<pre>{{ tab.content }}</pre>
					<a href="{{ path('app_tab_show', {'id': tab.id}) }}">Show</a>
					<a href="{{ path('app_tab_edit', {'id': tab.id}) }}">Edit</a>
				</div>
			{% else %}
				no records found
			{% endfor %}
		</div>
	</div>

	<a href="{{ path('app_tab_new') }}">Create new</a>
{% endblock %}
